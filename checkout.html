<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Checkout ‚Äî REIGNX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<nav class="navbar">
  <div class="nav-left">
    <a class="logo" href="index.html">REIGNX</a>
  </div>
</nav>
  <!-- CHECKOUT STEPS -->
	<div class="checkout-steps">
	  <div class="step completed">Cart</div>
	  <div class="step active">Address</div>
	  <div class="step">Payment</div>
	</div>
<main class="cart-page">
  <h1 class="cart-title">Checkout</h1>

  <div class="cart-layout">
    <!-- LEFT: ADDRESS -->
    <div class="checkout-form">
	  <h2>Shipping Address</h2>

    <input class="field" type="text" placeholder="Full Name" id="fullName" required />
    <input class="field" type="email" placeholder="Email Address" id="email" required />
    <input class="field" type="text" placeholder="Address Line" id="address" required />
    <div class="grid-2">
      <input class="field" type="text" placeholder="City" id="city" required />
      <input
        class="field"
        type="text"
        placeholder="Pincode"
        id="pincode"
        maxlength="6"
        required
      />
    </div>
    <input
      class="field"
      type="tel"
      placeholder="Phone Number"
      id="phone"
      maxlength="10"
      required
    />
	  <button class="checkout-btn" onclick="goToPayment()">
		Continue to Payment
	  </button>
    <button
      class="checkout-btn"
      style="margin-bottom:20px;background:#111;color:#fff;border:1px solid #333"
      onclick="window.location.href='cart.html'"
    >
      ‚Üê Back to Cart
    </button>

	</div>

    <!-- RIGHT: SUMMARY -->
    <div class="cart-summary">
      <h2>Order Summary</h2>
      <p>Total: ‚Çπ<strong><span id="cart-total">0</span></strong></p>
    </div>
  </div>
</main>

<script src="script.js"></script>
<script>
function goToPayment() {
  const name = document.getElementById("fullName").value.trim();
  const email = document.getElementById("email").value.trim();
  const address = document.getElementById("address").value.trim();
  const city = document.getElementById("city").value.trim();
  const pincode = document.getElementById("pincode").value.trim();
  const phone = document.getElementById("phone").value.trim();

  // REGEX RULES
  const nameRegex = /^[A-Za-z ]{3,}$/;
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const cityRegex = /^[A-Za-z ]{2,}$/;
  const pincodeRegex = /^[1-9][0-9]{5}$/;       // Indian pincode
  const phoneRegex = /^[6-9][0-9]{9}$/;         // Indian mobile

  if (!nameRegex.test(name)) {
    alert("Please enter a valid full name");
    return;
  }

  if (!emailRegex.test(email)) {
    alert("Please enter a valid email address");
    return;
  }

  if (address.length < 5) {
    alert("Please enter a valid address");
    return;
  }

  if (!cityRegex.test(city)) {
    alert("Please enter a valid city name");
    return;
  }

  if (!pincodeRegex.test(pincode)) {
    alert("Please enter a valid 6-digit pincode");
    return;
  }

  if (!phoneRegex.test(phone)) {
    alert("Please enter a valid 10-digit mobile number");
    return;
  }

  // ‚úÖ All validations passed
  const details = { name, email, address, city, pincode, phone };
  localStorage.setItem("checkoutDetails", JSON.stringify(details));
  window.location.href = "payment.html";
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  if (cart.length === 0) {
    alert("Your cart is empty");
    window.location.href = "cart.html";
  }

  renderCartTotalOnly();
  updateCartCount();
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  // üîÅ Restore previously entered address details
  const saved = JSON.parse(localStorage.getItem("checkoutDetails"));

  if (!saved) return;

  if (saved.name) document.getElementById("fullName").value = saved.name;
  if (saved.email) document.getElementById("email").value = saved.email;
  if (saved.address) document.getElementById("address").value = saved.address;
  if (saved.city) document.getElementById("city").value = saved.city;
  if (saved.pincode) document.getElementById("pincode").value = saved.pincode;
  if (saved.phone) document.getElementById("phone").value = saved.phone;
});
</script>
</body>
</html>
